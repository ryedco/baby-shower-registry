<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Baby Shower Registry</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@600;700&display=swap" rel="stylesheet">
  <style>
    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

    :root {
      --sage: #8fa88a;
      --sage-light: #3d4d3a;
      --sage-dark: #a3c296;
      --cream: #2a2520;
      --warm: #332e28;
      --warm-mid: #3a342d;
      --blush: #4a3835;
      --blush-light: #3d3230;
      --text: #e8e2da;
      --text-light: #b0a89e;
      --accent: #d4b88a;
      --accent-light: #e8d5b8;
      --claimed: #3a3530;
      --card-bg: #352f2a;
      --shadow: 0 2px 16px rgba(0,0,0,0.25);
      --shadow-hover: 0 6px 24px rgba(0,0,0,0.35);
      --radius: 14px;
    }

    body {
      font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
      background: var(--cream);
      background-image:
        radial-gradient(ellipse at 20% 50%, rgba(100,130,90,0.08) 0%, transparent 60%),
        radial-gradient(ellipse at 80% 20%, rgba(180,120,100,0.06) 0%, transparent 50%),
        radial-gradient(ellipse at 50% 90%, rgba(160,130,80,0.05) 0%, transparent 50%);
      background-attachment: fixed;
      color: var(--text);
      line-height: 1.6;
      min-height: 100vh;
    }

    /* HERO */
    .hero {
      text-align: center;
      padding: 70px 20px 55px;
      background:
        linear-gradient(160deg, #3a4536 0%, #3a342d 40%, #4a3835 75%, #332e28 100%);
      position: relative;
      overflow: hidden;
      border-bottom: 2px solid rgba(143,168,138,0.2);
    }
    .hero::before {
      content: '';
      position: absolute;
      top: -50%;
      left: -50%;
      width: 200%;
      height: 200%;
      background:
        radial-gradient(circle at 25% 40%, rgba(143,168,138,0.15) 0%, transparent 45%),
        radial-gradient(circle at 75% 60%, rgba(180,120,100,0.1) 0%, transparent 40%);
      pointer-events: none;
    }
    .hero .names {
      font-size: 1.4rem;
      font-weight: 400;
      letter-spacing: 0.12em;
      text-transform: uppercase;
      color: var(--text-light);
      margin-bottom: 2px;
      position: relative;
      z-index: 1;
    }
    .hero h1 {
      font-family: 'Dancing Script', cursive;
      font-size: 4rem;
      font-weight: 700;
      color: var(--text);
      margin-bottom: 4px;
      position: relative;
      z-index: 1;
      line-height: 1.1;
    }
    .hero .subtitle {
      font-size: 1.15rem;
      color: var(--text-light);
      font-weight: 400;
      margin-bottom: 6px;
      position: relative;
      z-index: 1;
    }
    .hero .date {
      font-size: 1rem;
      color: var(--sage-dark);
      font-weight: 500;
      letter-spacing: 0.08em;
      text-transform: uppercase;
      position: relative;
      z-index: 1;
    }
    .hero .peanut-img {
      position: relative;
      z-index: 1;
      margin: 18px auto 0;
    }

    /* HAND-DRAWN HEARTS */
    .hearts-left, .hearts-right {
      position: absolute;
      top: 0;
      bottom: 0;
      width: 120px;
      pointer-events: none;
      z-index: 0;
    }
    .hearts-left { left: 10px; }
    .hearts-right { right: 10px; }
    .hearts-left svg, .hearts-right svg {
      position: absolute;
    }

    @media (max-width: 768px) {
      .hearts-left, .hearts-right { width: 60px; }
      .hearts-left svg, .hearts-right svg { transform: scale(0.6); }
    }
    @media (max-width: 500px) {
      .hearts-left, .hearts-right { display: none; }
    }

    /* NAV FILTERS */
    .filters {
      display: flex;
      justify-content: center;
      flex-wrap: wrap;
      gap: 10px;
      padding: 30px 20px 10px;
      max-width: 800px;
      margin: 0 auto;
    }
    .filter-btn {
      padding: 8px 20px;
      border: 1.5px solid rgba(143,168,138,0.3);
      border-radius: 50px;
      background: var(--card-bg);
      color: var(--text);
      font-size: 0.9rem;
      cursor: pointer;
      transition: all 0.2s;
    }
    .filter-btn:hover { background: rgba(143,168,138,0.15); }
    .filter-btn.active {
      background: var(--sage);
      color: #fff;
      border-color: var(--sage);
    }

    /* PROGRESS */
    .progress-section {
      max-width: 500px;
      margin: 20px auto 10px;
      padding: 0 20px;
      text-align: center;
    }
    .progress-bar-bg {
      height: 8px;
      background: var(--warm-mid);
      border-radius: 50px;
      overflow: hidden;
      margin-top: 8px;
    }
    .progress-bar-fill {
      height: 100%;
      background: linear-gradient(90deg, var(--sage) 0%, var(--sage-dark) 100%);
      border-radius: 50px;
      transition: width 0.4s ease;
    }
    .progress-text {
      font-size: 0.85rem;
      color: var(--text-light);
    }

    /* GRID */
    .registry {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
      gap: 24px;
      max-width: 1100px;
      margin: 24px auto 60px;
      padding: 0 24px;
    }

    /* CARD */
    .card {
      background: var(--card-bg);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      overflow: hidden;
      transition: transform 0.25s, box-shadow 0.25s;
      display: flex;
      flex-direction: column;
      border: 1px solid rgba(143,168,138,0.12);
    }
    .card:hover {
      transform: translateY(-4px);
      box-shadow: var(--shadow-hover);
    }
    .card.claimed { opacity: 0.55; }
    .card-img {
      width: 100%;
      height: 200px;
      object-fit: contain;
      background: #f5f0ea;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 3.8rem;
      padding: 16px;
    }
    .card-img img {
      max-width: 100%;
      max-height: 100%;
      object-fit: contain;
    }
    .card-body {
      padding: 20px;
      flex: 1;
      display: flex;
      flex-direction: column;
    }
    .card-category {
      font-size: 0.72rem;
      text-transform: uppercase;
      letter-spacing: 0.1em;
      color: var(--sage-dark);
      font-weight: 600;
      margin-bottom: 6px;
      background: rgba(143,168,138,0.15);
      display: inline-block;
      padding: 2px 10px;
      border-radius: 50px;
      align-self: flex-start;
    }
    .card-title {
      font-size: 1.1rem;
      font-weight: 600;
      margin-bottom: 4px;
      margin-top: 4px;
    }
    .card-detail {
      font-size: 0.88rem;
      color: var(--text);
      margin-bottom: 12px;
      flex: 1;
    }
    .card-price {
      font-size: 1.05rem;
      font-weight: 700;
      color: var(--accent);
      margin-bottom: 14px;
    }
    .card-link {
      display: inline-block;
      margin-bottom: 12px;
      font-size: 0.85rem;
      color: var(--sage-dark);
      text-decoration: underline;
    }
    .card-link:hover { color: var(--text); }

    .btn {
      width: 100%;
      padding: 12px;
      border: none;
      border-radius: 10px;
      font-size: 0.95rem;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.2s;
    }
    .btn-claim {
      background: linear-gradient(135deg, #7a9a6e 0%, #5e8050 100%);
      color: #fff;
      box-shadow: 0 2px 10px rgba(90,128,80,0.35);
    }
    .btn-claim:hover {
      background: linear-gradient(135deg, #8aaa7e 0%, #6e9060 100%);
      box-shadow: 0 3px 14px rgba(90,128,80,0.45);
    }
    .btn-claimed {
      background: var(--claimed);
      color: var(--text-light);
      cursor: default;
    }
    .claimed-by {
      text-align: center;
      font-size: 0.82rem;
      color: var(--text-light);
      margin-top: 8px;
      font-style: italic;
    }

    /* MODAL */
    .modal-overlay {
      display: none;
      position: fixed;
      inset: 0;
      background: rgba(15,12,10,0.55);
      backdrop-filter: blur(6px);
      z-index: 1000;
      align-items: center;
      justify-content: center;
      padding: 20px;
    }
    .modal-overlay.active { display: flex; }
    .modal {
      background: var(--card-bg);
      border-radius: var(--radius);
      padding: 32px;
      max-width: 400px;
      width: 100%;
      box-shadow: 0 12px 50px rgba(0,0,0,0.4);
      border: 1px solid rgba(143,168,138,0.15);
    }
    .modal h2 {
      font-size: 1.3rem;
      margin-bottom: 4px;
    }
    .modal p {
      font-size: 0.9rem;
      color: var(--text-light);
      margin-bottom: 20px;
    }
    .modal label {
      display: block;
      font-size: 0.85rem;
      font-weight: 600;
      margin-bottom: 6px;
    }
    .modal input {
      width: 100%;
      padding: 10px 14px;
      border: 1.5px solid rgba(143,168,138,0.25);
      border-radius: 8px;
      font-size: 1rem;
      margin-bottom: 20px;
      outline: none;
      transition: border 0.2s;
      background: rgba(255,255,255,0.06);
      color: var(--text);
    }
    .modal input:focus { border-color: var(--sage); }
    .modal-btns {
      display: flex;
      gap: 10px;
    }
    .modal-btns .btn { flex: 1; }
    .btn-cancel {
      background: var(--warm-mid);
      color: var(--text);
    }
    .btn-cancel:hover { background: var(--claimed); }

    /* MESSAGE */
    .message {
      max-width: 650px;
      margin: 0 auto;
      padding: 36px 32px;
      text-align: center;
      background: var(--card-bg);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      margin-top: -20px;
      position: relative;
      z-index: 2;
      border: 1px solid rgba(143,168,138,0.1);
    }
    .message h2 {
      font-size: 1.3rem;
      font-weight: 400;
      margin-bottom: 8px;
      color: var(--text);
    }
    .message p {
      color: var(--text-light);
      font-size: 0.95rem;
      line-height: 1.7;
    }

    /* FOOTER */
    footer {
      text-align: center;
      padding: 50px 20px 40px;
      color: var(--text-light);
      font-size: 0.85rem;
      border-top: 1px solid rgba(143,168,138,0.12);
      margin-top: 20px;
    }

    /* ADMIN TOGGLE */
    .admin-bar {
      display: none;
      background: rgba(180,150,60,0.15);
      padding: 10px 20px;
      text-align: center;
      font-size: 0.85rem;
      border-bottom: 1px solid rgba(180,150,60,0.25);
      color: var(--accent);
    }
    .admin-bar.active { display: block; }
    .admin-bar button {
      margin-left: 10px;
      padding: 4px 14px;
      border: 1px solid rgba(180,150,60,0.4);
      border-radius: 6px;
      background: rgba(255,255,255,0.08);
      color: var(--text);
      cursor: pointer;
      font-size: 0.82rem;
    }
    .admin-bar button:hover { background: rgba(255,255,255,0.14); }

    @media (max-width: 600px) {
      .hero h1 { font-size: 2.8rem; }
      .hero .names { font-size: 1.1rem; }
      .registry { grid-template-columns: 1fr; padding: 0 16px; }
    }
  </style>
</head>
<body>

<!-- ADMIN BAR (visible when ?admin in URL) -->
<div class="admin-bar" id="adminBar">
  Admin Mode â€” <button onclick="resetAllClaims()">Reset All Claims</button>
  <button onclick="exportData()">Export Data</button>
</div>

<header class="hero">
  <!-- Hand-drawn hearts left side -->
  <div class="hearts-left">
    <svg width="45" height="42" viewBox="0 0 45 42" style="top:18%;left:10px" fill="none">
      <path d="M22 38C22 38 3 28 3 14C3 7 8 2 14 2C18 2 21 5 22 8C23 5 26 2 30 2C36 2 41 7 41 14C41 28 22 38 22 38Z" stroke="#b85555" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" fill="none" style="filter:url(#pencil1)"/>
    </svg>
    <svg width="32" height="30" viewBox="0 0 45 42" style="top:48%;left:50px" fill="none">
      <path d="M22 38C22 38 3 28 3 14C3 7 8 2 14 2C18 2 21 5 22 8C23 5 26 2 30 2C36 2 41 7 41 14C41 28 22 38 22 38Z" stroke="#c47070" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round" fill="none" style="filter:url(#pencil2)"/>
    </svg>
    <svg width="24" height="22" viewBox="0 0 45 42" style="top:75%;left:20px" fill="none">
      <path d="M22 38C22 38 3 28 3 14C3 7 8 2 14 2C18 2 21 5 22 8C23 5 26 2 30 2C36 2 41 7 41 14C41 28 22 38 22 38Z" stroke="#b85555" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" fill="none" style="filter:url(#pencil1)"/>
    </svg>
    <svg width="18" height="17" viewBox="0 0 45 42" style="top:35%;left:70px" fill="none">
      <path d="M22 38C22 38 3 28 3 14C3 7 8 2 14 2C18 2 21 5 22 8C23 5 26 2 30 2C36 2 41 7 41 14C41 28 22 38 22 38Z" stroke="#d08080" stroke-width="3.5" stroke-linecap="round" stroke-linejoin="round" fill="none" style="filter:url(#pencil2)"/>
    </svg>
  </div>

  <!-- Hand-drawn hearts right side -->
  <div class="hearts-right">
    <svg width="38" height="35" viewBox="0 0 45 42" style="top:25%;right:15px" fill="none">
      <path d="M22 38C22 38 3 28 3 14C3 7 8 2 14 2C18 2 21 5 22 8C23 5 26 2 30 2C36 2 41 7 41 14C41 28 22 38 22 38Z" stroke="#c47070" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" fill="none" style="filter:url(#pencil1)"/>
    </svg>
    <svg width="22" height="20" viewBox="0 0 45 42" style="top:55%;right:60px" fill="none">
      <path d="M22 38C22 38 3 28 3 14C3 7 8 2 14 2C18 2 21 5 22 8C23 5 26 2 30 2C36 2 41 7 41 14C41 28 22 38 22 38Z" stroke="#b85555" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" fill="none" style="filter:url(#pencil1)"/>
    </svg>
    <svg width="28" height="26" viewBox="0 0 45 42" style="top:72%;right:20px" fill="none">
      <path d="M22 38C22 38 3 28 3 14C3 7 8 2 14 2C18 2 21 5 22 8C23 5 26 2 30 2C36 2 41 7 41 14C41 28 22 38 22 38Z" stroke="#d08080" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round" fill="none" style="filter:url(#pencil2)"/>
    </svg>
    <svg width="16" height="15" viewBox="0 0 45 42" style="top:12%;right:55px" fill="none">
      <path d="M22 38C22 38 3 28 3 14C3 7 8 2 14 2C18 2 21 5 22 8C23 5 26 2 30 2C36 2 41 7 41 14C41 28 22 38 22 38Z" stroke="#b85555" stroke-width="3.5" stroke-linecap="round" stroke-linejoin="round" fill="none" style="filter:url(#pencil2)"/>
    </svg>
  </div>

  <!-- SVG filters for hand-drawn pencil look -->
  <svg width="0" height="0" style="position:absolute">
    <defs>
      <filter id="pencil1">
        <feTurbulence type="turbulence" baseFrequency="0.04" numOctaves="4" result="noise" seed="1"/>
        <feDisplacementMap in="SourceGraphic" in2="noise" scale="1.8" xChannelSelector="R" yChannelSelector="G"/>
      </filter>
      <filter id="pencil2">
        <feTurbulence type="turbulence" baseFrequency="0.05" numOctaves="3" result="noise" seed="7"/>
        <feDisplacementMap in="SourceGraphic" in2="noise" scale="2.2" xChannelSelector="R" yChannelSelector="G"/>
      </filter>
    </defs>
  </svg>

  <p class="names">Peixin & Ryan</p>
  <h1>Baby Shower</h1>
  <p class="subtitle">for Little Peanut</p>
  <p class="date">March 15, 2026</p>

  <!-- Cute horizontal peanut SVG -->
  <div class="peanut-img">
    <svg width="160" height="90" viewBox="0 0 160 90" fill="none" xmlns="http://www.w3.org/2000/svg">
      <!-- Peanut body - horizontal: left lobe, right lobe, pinched middle -->
      <ellipse cx="48" cy="45" rx="42" ry="32" fill="#e8c97a" stroke="#c9a84c" stroke-width="2"/>
      <ellipse cx="112" cy="45" rx="42" ry="34" fill="#e8c97a" stroke="#c9a84c" stroke-width="2"/>
      <!-- Middle overlap fill to blend the two lobes -->
      <ellipse cx="80" cy="45" rx="18" ry="24" fill="#e8c97a"/>
      <!-- Waist pinch lines (top and bottom) -->
      <path d="M72 15 C76 22, 84 22, 88 15" stroke="#c9a84c" stroke-width="2" fill="none" stroke-linecap="round"/>
      <path d="M72 75 C76 68, 84 68, 88 75" stroke="#c9a84c" stroke-width="2" fill="none" stroke-linecap="round"/>
      <path d="M70 13 C75 20, 85 20, 90 13" stroke="#c9a84c" stroke-width="1.2" fill="none" stroke-linecap="round" opacity="0.4"/>
      <path d="M70 77 C75 70, 85 70, 90 77" stroke="#c9a84c" stroke-width="1.2" fill="none" stroke-linecap="round" opacity="0.4"/>
      <!-- Texture lines on left lobe -->
      <path d="M22 30 C28 35, 28 55, 22 60" stroke="#d4b05e" stroke-width="1" fill="none" stroke-linecap="round" opacity="0.4"/>
      <path d="M35 22 C40 30, 40 60, 35 68" stroke="#d4b05e" stroke-width="1" fill="none" stroke-linecap="round" opacity="0.3"/>
      <!-- Texture lines on right lobe -->
      <path d="M138 30 C132 35, 132 55, 138 60" stroke="#d4b05e" stroke-width="1" fill="none" stroke-linecap="round" opacity="0.4"/>
      <path d="M125 22 C120 30, 120 60, 125 68" stroke="#d4b05e" stroke-width="1" fill="none" stroke-linecap="round" opacity="0.3"/>
      <!-- Face on right lobe - eyes -->
      <ellipse cx="100" cy="39" rx="3.5" ry="4" fill="#5a4a2a"/>
      <ellipse cx="120" cy="39" rx="3.5" ry="4" fill="#5a4a2a"/>
      <!-- Eye shine -->
      <ellipse cx="101.5" cy="37.5" rx="1.3" ry="1.5" fill="white"/>
      <ellipse cx="121.5" cy="37.5" rx="1.3" ry="1.5" fill="white"/>
      <!-- Rosy cheeks -->
      <ellipse cx="95" cy="48" rx="5" ry="3.5" fill="#f0a0a0" opacity="0.45"/>
      <ellipse cx="127" cy="48" rx="5" ry="3.5" fill="#f0a0a0" opacity="0.45"/>
      <!-- Smile -->
      <path d="M104 52 C107 57, 114 57, 117 52" stroke="#5a4a2a" stroke-width="2" fill="none" stroke-linecap="round"/>
    </svg>
  </div>
</header>

<div class="message">
  <h2>Thank you for celebrating with us!</h2>
  <p>We're so grateful for your love and support. If you'd like to gift something, here are some things we'd love for our little one. No pressure at all â€” your presence is the best present.</p>
</div>

<div class="filters">
  <button class="filter-btn active" data-filter="all">All</button>
  <button class="filter-btn" data-filter="essentials">Essentials</button>
  <button class="filter-btn" data-filter="gear">Gear</button>
</div>

<div class="progress-section">
  <span class="progress-text" id="progressText">0 of 0 items claimed</span>
  <div class="progress-bar-bg">
    <div class="progress-bar-fill" id="progressFill" style="width: 0%"></div>
  </div>
</div>

<div class="registry" id="registry"></div>

<footer>Made with love for our little one ðŸ’›</footer>

<!-- CLAIM MODAL -->
<div class="modal-overlay" id="modal">
  <div class="modal">
    <h2>Claim this gift</h2>
    <p id="modalItem"></p>
    <label for="claimName">Your name</label>
    <input type="text" id="claimName" placeholder="e.g. Aunt Sarah" autofocus>
    <div class="modal-btns">
      <button class="btn btn-cancel" onclick="closeModal()">Cancel</button>
      <button class="btn btn-claim" onclick="confirmClaim()">Claim It</button>
    </div>
  </div>
</div>

<script>
  // =====================================================================
  //  REGISTRY DATA â€” Edit this array to customize your registry!
  // =====================================================================
  const registryItems = [
    {
      id: 1,
      name: "Diapers (Size 1)",
      detail: "You can never have too many! Any brand works.",
      category: "essentials",
      img: "https://healthybaby.com/cdn/shop/files/Subscription-PDP-Carousel-3.jpg?v=1769546955",
      link: "https://healthybaby.com/products/our-diaper?variant=40732779020337"
    },
    {
      id: 2,
      name: "Diapers (Size 2)",
      detail: "You can never have too many! Any brand works.",
      category: "essentials",
      img: "https://healthybaby.com/cdn/shop/files/Subscription-PDP-Carousel-3.jpg?v=1769546955",
      link: "https://healthybaby.com/products/our-diaper?variant=40732779020337"
    },
    {
      id: 20,
      name: "Wipe Warmer and Dispenser",
      detail: "Keeps wipes warm and ready for changes.",
      category: "essentials",
      img: "https://www.hiccapop.com/cdn/shop/files/HP_WWCL_MLP_081425_54513059-49fe-451f-92ca-ec4ce3f62198.png?v=1759432051",
      link: "https://www.amazon.com/Warmer-Wipes-Dispenser-Holder-Changing/dp/B01LZJVSTE"
    },
    {
      id: 3,
      name: "Lansinoh Glass Feeding Bottles",
      detail: "Glass bottles, 5oz, 4-pack.",
      category: "essentials",
      img: "https://lansinoh.com/cdn/shop/files/5oz_4_ct_grande.png?v=1769541985",
      link: "https://lansinoh.com/products/glass-feeding-baby-5oz?variant=51956458848626"
    },
    {
      id: 5,
      name: "Silver Cross Reef 2 Stroller & Bassinet Bundle",
      detail: "Color: Espresso. SE Stroller & Bassinet Bundle.",
      category: "gear",
      img: "https://www.swaddlesbaby.com/cdn/shop/files/reef-bassinet-accessory-bundle-espresso_e1c0fa2b-068f-421e-b340-7bc33d661c77_grande.png?v=1771499271",
      link: "https://silvercrossus.com/product/silver-cross-reef-2-foldable-stroller/"
    },
    {
      id: 6,
      name: "Nuna PIPA RX Infant Car Seat with RELX Base",
      detail: "Color: Pine. Infant car seat, rear-facing.",
      category: "gear",
      img: "https://nunababy.com/media/catalog/product/N/u/Nuna_PIPArx_2025_Pine_Angle_US_web_aa0e.png?optimize=high&fit=bounds&height=730&width=730&canvas=730:730&format=jpeg",
      link: "https://nunababy.com/usa/pipa-rx-infant-car-seat-with-relx-base?color_ref=16366"
    },
    {
      id: 22,
      name: "Comfy Cubs Muslin Burp Cloths",
      detail: "Large 20x10\", 6-layer, ultra absorbent 100% cotton. Pack of 6.",
      category: "essentials",
      img: "https://comfycubs.com/cdn/shop/files/16PKelpMBC2000X2000_2f0f2aec-539f-492f-aa0a-7a438b3a8961_grande.png?v=1717510738",
      link: "https://www.amazon.com/dp/B0B77YPC9H"
    },
    {
      id: 23,
      name: "Boon Trove Silicone Breast Pump Set",
      detail: "Hands-free milk collector, 2 count with travel pouch.",
      category: "essentials",
      img: "https://cdn11.bigcommerce.com/s-bo5kvbk80m/images/stencil/1280x1280/products/4174/21603/g0rvfp6gwi4colrn11qh__12266.1747154783.jpg?c=1",
      link: "https://www.amazon.com/dp/B0C5YKZDDJ"
    },
    {
      id: 21,
      name: "SILVERETTE Silver Nursing Cups with O-Feel Rings",
      detail: "XL size. Pure 925 silver nipple shields with O-Feel Silicone Rings.",
      category: "essentials",
      img: "https://silveretteusa.com/cdn/shop/files/37c1b22d59e214d67f59cf957ad479377e3e253f_1.jpg?v=1764866452",
      link: "https://www.amazon.com/dp/B0B4H6GXCW?th=1"
    },
    {
      id: 24,
      name: "Frida Baby Electric Nail Buffer",
      detail: "Safe electric nail file with 4 buffer pads, LED light, and storage case.",
      category: "essentials",
      img: "https://cdn.shopify.com/s/files/1/0162/3257/9120/products/ElectricNailTrimmer_1.jpg?v=1679595761",
      link: "https://www.amazon.com/dp/B0BV4SXTFZ"
    },
    {
      id: 25,
      name: "Alpine Muffy Baby Ear Protection",
      detail: "Sage Green. Hearing protection for babies 3-48 months, 24dB noise reduction.",
      category: "gear",
      img: "https://www.alpinehearingprotection.com/cdn/shop/files/alpine-muffy-baby-product-image-sage-green.jpg?v=1768905283",
      link: "https://www.amazon.com/dp/B0DK1TM461"
    },
  ];

  // =====================================================================
  //  STATE
  // =====================================================================
  const STORAGE_KEY = "babyshower_claims";
  let claims = JSON.parse(localStorage.getItem(STORAGE_KEY) || "{}");
  let currentClaimId = null;
  let activeFilter = "all";

  // Admin mode
  if (location.search.includes("admin")) {
    document.getElementById("adminBar").classList.add("active");
  }

  // =====================================================================
  //  RENDER
  // =====================================================================
  function render() {
    const grid = document.getElementById("registry");
    grid.innerHTML = "";

    const filtered = activeFilter === "all"
      ? registryItems
      : registryItems.filter(i => i.category === activeFilter);

    filtered.forEach(item => {
      const max = item.maxClaims || 1;
      const claimData = claims[item.id];
      const claimList = Array.isArray(claimData) ? claimData : (claimData ? [claimData] : []);
      const claimCount = claimList.length;
      const isFull = claimCount >= max;

      const card = document.createElement("div");
      card.className = "card" + (isFull ? " claimed" : "");

      let btnHtml;
      if (isFull) {
        btnHtml = `<button class="btn btn-claimed">Claimed</button>`;
      } else if (max > 1 && claimCount > 0) {
        btnHtml = `<button class="btn btn-claim" onclick="openModal(${item.id})">${claimCount} of ${max} claimed â€” I'll Get This!</button>`;
      } else {
        btnHtml = `<button class="btn btn-claim" onclick="openModal(${item.id})">I'll Get This!</button>`;
      }

      card.innerHTML = `
        <div class="card-img">${item.img ? `<img src="${item.img}" alt="${item.name}" loading="lazy">` : (item.emoji || '')}</div>
        <div class="card-body">
          <div class="card-category">${item.category}</div>
          <div class="card-title">${item.name}</div>
          <div class="card-detail">${item.detail}</div>
          ${item.link ? `<a class="card-link" href="${item.link}" target="_blank" rel="noopener">View in store &rarr;</a>` : ""}
          ${btnHtml}
        </div>
      `;
      grid.appendChild(card);
    });

    updateProgress();
  }

  function updateProgress() {
    let total = 0, claimed = 0;
    registryItems.forEach(item => {
      const max = item.maxClaims || 1;
      total += max;
      const claimData = claims[item.id];
      const claimList = Array.isArray(claimData) ? claimData : (claimData ? [claimData] : []);
      claimed += Math.min(claimList.length, max);
    });
    document.getElementById("progressText").textContent = `${claimed} of ${total} items claimed`;
    document.getElementById("progressFill").style.width = `${(claimed / total) * 100}%`;
  }

  // =====================================================================
  //  FILTERS
  // =====================================================================
  document.querySelectorAll(".filter-btn").forEach(btn => {
    btn.addEventListener("click", () => {
      document.querySelectorAll(".filter-btn").forEach(b => b.classList.remove("active"));
      btn.classList.add("active");
      activeFilter = btn.dataset.filter;
      render();
    });
  });

  // =====================================================================
  //  MODAL
  // =====================================================================
  function openModal(id) {
    currentClaimId = id;
    const item = registryItems.find(i => i.id === id);
    document.getElementById("modalItem").textContent = item.name;
    document.getElementById("claimName").value = "";
    document.getElementById("modal").classList.add("active");
    setTimeout(() => document.getElementById("claimName").focus(), 100);
  }

  function closeModal() {
    document.getElementById("modal").classList.remove("active");
    currentClaimId = null;
  }

  function confirmClaim() {
    const name = document.getElementById("claimName").value.trim();
    if (!name) {
      document.getElementById("claimName").style.borderColor = "#e74c3c";
      return;
    }
    const item = registryItems.find(i => i.id === currentClaimId);
    const max = item.maxClaims || 1;
    if (max > 1) {
      const existing = Array.isArray(claims[currentClaimId]) ? claims[currentClaimId] : (claims[currentClaimId] ? [claims[currentClaimId]] : []);
      existing.push(name);
      claims[currentClaimId] = existing;
    } else {
      claims[currentClaimId] = name;
    }
    localStorage.setItem(STORAGE_KEY, JSON.stringify(claims));
    closeModal();
    render();

    // Send email notification
    fetch("https://formsubmit.co/ajax/rycole12@gmail.com", {
      method: "POST",
      headers: { "Content-Type": "application/json", "Accept": "application/json" },
      body: JSON.stringify({
        _subject: "Baby Registry: " + item.name + " was claimed!",
        item: item.name,
        "claimed by": name,
        _template: "table"
      })
    }).catch(() => {});
  }

  // Close modal on overlay click
  document.getElementById("modal").addEventListener("click", e => {
    if (e.target === e.currentTarget) closeModal();
  });

  // Close modal on Escape
  document.addEventListener("keydown", e => {
    if (e.key === "Escape") closeModal();
    if (e.key === "Enter" && document.getElementById("modal").classList.contains("active")) confirmClaim();
  });

  // =====================================================================
  //  ADMIN
  // =====================================================================
  function resetAllClaims() {
    if (confirm("Reset all claims? This cannot be undone.")) {
      claims = {};
      localStorage.removeItem(STORAGE_KEY);
      render();
    }
  }

  function exportData() {
    const data = registryItems.map(item => ({
      name: item.name,
      claimedBy: claims[item.id] || null
    }));
    const blob = new Blob([JSON.stringify(data, null, 2)], { type: "application/json" });
    const a = document.createElement("a");
    a.href = URL.createObjectURL(blob);
    a.download = "registry-claims.json";
    a.click();
  }

  // =====================================================================
  //  INIT
  // =====================================================================
  render();
</script>

</body>
</html>
